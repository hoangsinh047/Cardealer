<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap"
          rel="stylesheet">

    <title>CAR DEALER WEBSITE</title>

    <link rel="stylesheet" type="text/css" th:href="@{assets/css/bootstrap.min.css}">

    <link rel="stylesheet" type="text/css" th:href="@{assets/css/font-awesome.css}">

    <link rel="stylesheet" th:href="@{assets/css/style.css}">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>

<body>

<!-- ***** Preloader Start ***** -->
<div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
        <span class="dot"></span>
        <div class="dots">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<!-- ***** Preloader End ***** -->


<!-- ***** Header Area Start ***** -->
<div th:replace="~{client/include/header :: header}"></div>

<!-- ***** Header Area End ***** -->

<!-- ***** Call to Action Start ***** -->
<section class="section section-bg" id="call-to-action"
         th:style="|background-image: url('@{/assets/images/banner-image-1-1920x500.jpg}')|">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 offset-lg-1">
                <div class="cta-content">
                    <br>
                    <br>
                    <h2 style="font-family: 'Roboto', sans-serif; font-weight: bold">Sản phẩm <em>của chúng tôi!</em>
                    </h2>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- ***** Call to Action End ***** -->

<!-- ***** Fleet Starts ***** -->
<section class="section" id="trainers">
    <div class="container">
        <br>
        <br>
        <div class="contact-form" style="font-family: 'Roboto', sans-serif">
            <form action="#" id="contact">
                <div class="row">
                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" >
                        <div class="form-group" >
                            <label>Từ khóa:</label>
                            <input type="text" id="keyword" class="form-control" placeholder="Nhập từ khóa">
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label>Used/New:</label>
                            <select id="status">
                                <option value="">--All --</option>
                                <option value="new">Xe mới</option>
                                <option value="used">Xe cũ</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label>Kiểu xe:</label>

                            <select id="type">
                                <option value="">--All --</option>
                                <option value="">Sedan</option>
                                <option value="">Suv</option>
                                <option value="">Cuv</option>
                                <option value="">Hatchback</option>
                                <option value="">Bán tải</option>
                                <option value="">Sport</option>
                                <option value="">Mpv</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label>Hãng xe:</label>

                            <select id="brand">
                                <option value="">-- All --</option>
                                <option value="">Toyota</option>
                                <option value="">Hyundai</option>
                                <option value="">Honda</option>
                                <option value="">Kia</option>
                                <option value="">Mitsubishi</option>
                                <option value="">Nissan</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label>Khoảng giá:</label>

                            <select id="price">
                                <option value="">-- All --</option>
                                <option value=""> All</option>
                                <option value=""> All</option>
                                <option value=""> All</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label >Odo:</label>
                            <select id="mileage">
                                <option value="">-- All --</option>
                                <option value=""> All</option>
                                <option value=""> All</option>
                                <option value=""> All</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label>Nhiên liệu:</label>

                            <select id="fuel">
                                <option value="">-- All --</option>
                                <option value="">Xăng</option>
                                <option value="">Dầu</option>
                                <option value="">Hybrid</option>
                                <option value="">Điện</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                        <div class="form-group">
                            <label>Hộp số:</label>

                            <select id="gearbox">
                                <option value="">-- All --</option>
                                <option value="">Số sàn</option>
                                <option value="">Số tự động</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-4 offset-sm-4">
                    <div class="main-button text-center">
                        <button type="button" onclick="searchCars()">Tìm kiếm</button>
                    </div>
                </div>
                <br>
                <br>
            </form>
        </div>

        <div class="row">
            <div class="col-lg-4" th:each="product : ${products}">
                <div class="trainer-item">
                    <div class="image-thumb">
                        <img th:src="@{${#strings.arraySplit(product.imageUrl, ',')[0]}}" alt="Car Image">
                    </div>
                    <div class="down-content">
                <span>
                    <sup>Giá từ: </sup><span
                        th:text="${#numbers.formatInteger(product.price, 0, 'COMMA')} +' đ '"></span>
                </span>

                        <h4 th:text="${product.name}"></h4>

                        <p>
                            <i class="fa fa-dashboard"></i> <span th:text="${product.odo}"></span> km &nbsp;&nbsp;&nbsp;
                            <i class="fa fa-cog"></i> <span th:text="${product.gearbox}"></span> &nbsp;&nbsp;&nbsp;
                            <i class="fa fa-cube"></i> <span th:text="${product.manufacturerName}"></span>
                        </p>

                        <ul class="social-icons">
                            <li><a th:href="@{/cars/{id}(id=${product.id})}">+ View Car</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <nav>
            <ul class="pagination pagination-lg justify-content-center">
                <li class="page-item">
                    <a class="page-link" th:href="@{#}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                <li class="page-item"><a class="page-link" th:href="@{#}">1</a></li>
                <li class="page-item"><a class="page-link" th:href="@{#}">2</a></li>
                <li class="page-item"><a class="page-link" th:href="@{#}">3</a></li>
                <li class="page-item">
                    <a class="page-link" th:href="@{#}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
            </ul>
        </nav>

    </div>
</section>
<!-- ***** Fleet Ends ***** -->


<!-- ***** Footer Start ***** -->
<div th:replace="~{client/include/footer:: footer}"></div>


<!-- jQuery -->
<script th:src="@{assets/js/jquery-2.1.0.min.js}"></script>

<!-- Bootstrap -->
<script th:src="@{assets/js/popper.js}"></script>
<script th:src="@{assets/js/bootstrap.min.js}"></script>

<!-- Plugins -->
<script th:src="@{assets/js/scrollreveal.min.js}"></script>
<script th:src="@{assets/js/waypoints.min.js}"></script>
<script th:src="@{assets/js/jquery.counterup.min.js}"></script>
<script th:src="@{assets/js/imgfix.min.js}"></script>
<script th:src="@{assets/js/mixitup.js}"></script>
<script th:src="@{assets/js/accordions.js}"></script>

<!-- Global Init -->
<script th:src="@{assets/js/custom.js}"></script>
<script>
    let cars = [];

    async function fetchData() {
        try {
            let response = await fetch("http://localhost:8080/api/product/getAllProduct"); // Thay bằng API của bạn
            let data = await response.json();
            cars = data.data; // Lưu danh sách xe từ API
            console.log("Dữ liệu xe:", cars);
        } catch (error) {
            console.error("Lỗi tải dữ liệu:", error);
        }
    }

    function searchCars() {
        let keyword = document.getElementById("keyword").value.toLowerCase();
        let status = document.getElementById("status").value;
        let manufacturer = document.getElementById("manufacturer").value;

        let filteredCars = cars.filter(car =>
            (keyword === "" || car.name.toLowerCase().includes(keyword) || car.description.toLowerCase().includes(keyword)) &&
            (status === "" || car.status === status) &&
            (manufacturer === "" || car.manufacturerName === manufacturer)
        );

        displayResults(filteredCars);
    }

    function displayResults(results) {
        let resultDiv = document.getElementById("car-results");
        resultDiv.innerHTML = results.length > 0
            ? results.map(car => `
                <div>
                    <img src="${car.imageUrl}" alt="${car.name}" width="150">
                    <p><b>${car.name}</b> - ${car.status} - ${car.manufacturerName} - ${car.price.toLocaleString()} VND</p>
                </div>
            `).join("")
            : "<p>Không tìm thấy xe phù hợp.</p>";
    }

    // Gọi API khi trang tải
    fetchData();
</script>
<script>
    // Mobile menu toggle
    $('.menu-trigger').click(function() {
        $('.nav').toggleClass('active2');
    });
</script>

</body>
</html>